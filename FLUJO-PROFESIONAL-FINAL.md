# üéØ FLUJO PROFESIONAL FINAL - Sistema Automatizado Instagram Avatar

**Fecha:** 29 Diciembre 2025
**Presupuesto:** ~$9/mes (muy por debajo del l√≠mite $50/mes)
**Capacidad:** 30 videos/mes profesionales

---

## üìä RESUMEN EJECUTIVO

### Tu Configuraci√≥n Elegida:

| Categor√≠a | Decisi√≥n | Costo Mensual |
|-----------|----------|---------------|
| **Scraping** | API actual (gratis) | $0 |
| **An√°lisis Visual** | GPT-4 Vision | ~$0.30 (30 an√°lisis) |
| **Fotos Avatar** | Drive + Flux (ocasional) | ~$0.28 (5 fotos/mes) |
| **Voz** | ElevenLabs Free Tier | $0 |
| **Video** | Kie.ai (Asistente AI elige proveedor) | ~$8.40 (30 videos) |
| **Subt√≠tulos** | Captions nativos Instagram | $0 |
| **Publicaci√≥n** | API Instagram/TikTok/Facebook | $0 |
| **Almacenamiento** | Google Drive | $0 |
| **TOTAL** | | **~$9/mes** ‚úÖ |

### Capacidad:
- **Videos/d√≠a:** 1 video
- **Videos/mes:** ~30 videos
- **Plataformas:** Instagram Reels + TikTok + Facebook Reels
- **Aprobaci√≥n:** Manual (revisas antes de publicar)
- **Ejecuci√≥n:** 7 AM diaria

---

## üîÑ DIAGRAMA DE FLUJO COMPLETO

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                     FLUJO AUTOM√ÅTICO COMPLETO                         ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚è∞ TRIGGER: Diario 7:00 AM
    ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                                                           ‚îÇ
    ‚ñº                                                           ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  1. AN√ÅLISIS DE COMPETIDORES            ‚îÇ                   ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÇ                   ‚îÇ
‚îÇ  API: /api/automation/analyze-posts     ‚îÇ                   ‚îÇ
‚îÇ                                          ‚îÇ                   ‚îÇ
‚îÇ  ‚úì Obtiene posts √∫ltimas 72h            ‚îÇ                   ‚îÇ
‚îÇ  ‚úì Calcula engagement rate              ‚îÇ                   ‚îÇ
‚îÇ  ‚úì Excluye posts ya usados (hash DB)    ‚îÇ                   ‚îÇ
‚îÇ  ‚úì Selecciona top 1 post                ‚îÇ                   ‚îÇ
‚îÇ                                          ‚îÇ                   ‚îÇ
‚îÇ  Output: {                               ‚îÇ                   ‚îÇ
‚îÇ    post_url,                             ‚îÇ                   ‚îÇ
‚îÇ    caption,                              ‚îÇ                   ‚îÇ
‚îÇ    media_url,                            ‚îÇ                   ‚îÇ
‚îÇ    engagement_rate,                      ‚îÇ                   ‚îÇ
‚îÇ    competitor_account,                   ‚îÇ                   ‚îÇ
‚îÇ    estimated_duration                    ‚îÇ                   ‚îÇ
‚îÇ  }                                       ‚îÇ                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
    ‚îÇ                                                           ‚îÇ
    ‚ñº                                                           ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  2. AN√ÅLISIS VISUAL (GPT-4 Vision)      ‚îÇ                   ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÇ                   ‚îÇ
‚îÇ  API: OpenAI GPT-4 Vision               ‚îÇ                   ‚îÇ
‚îÇ  Costo: $0.01                           ‚îÇ                   ‚îÇ
‚îÇ                                          ‚îÇ                   ‚îÇ
‚îÇ  Input: media_url del competidor        ‚îÇ                   ‚îÇ
‚îÇ  Prompt:                                 ‚îÇ                   ‚îÇ
‚îÇ  "Analiza esta imagen/video:            ‚îÇ                   ‚îÇ
‚îÇ   - Colores dominantes                  ‚îÇ                   ‚îÇ
‚îÇ   - Estilo de fondo (interior/exterior) ‚îÇ                   ‚îÇ
‚îÇ   - Iluminaci√≥n (natural/artificial)    ‚îÇ                   ‚îÇ
‚îÇ   - Composici√≥n (centrado/lateral)      ‚îÇ                   ‚îÇ
‚îÇ   - Mood (profesional/casual/din√°mico)  ‚îÇ                   ‚îÇ
‚îÇ   - Pose del presentador                ‚îÇ                   ‚îÇ
‚îÇ                                          ‚îÇ                   ‚îÇ
‚îÇ   Genera un prompt en ingl√©s para       ‚îÇ                   ‚îÇ
‚îÇ   replicar este estilo visual."         ‚îÇ                   ‚îÇ
‚îÇ                                          ‚îÇ                   ‚îÇ
‚îÇ  Output: {                               ‚îÇ                   ‚îÇ
‚îÇ    visual_style: {                       ‚îÇ                   ‚îÇ
‚îÇ      colors: ["blue", "white"],          ‚îÇ                   ‚îÇ
‚îÇ      background: "modern office",        ‚îÇ                   ‚îÇ
‚îÇ      lighting: "soft natural light",     ‚îÇ                   ‚îÇ
‚îÇ      mood: "professional confident",     ‚îÇ                   ‚îÇ
‚îÇ      complexity_score: 7/10              ‚îÇ                   ‚îÇ
‚îÇ    },                                    ‚îÇ                   ‚îÇ
‚îÇ    flux_prompt: "Professional woman...", ‚îÇ                   ‚îÇ
‚îÇ    use_flux: true/false                  ‚îÇ                   ‚îÇ
‚îÇ  }                                       ‚îÇ                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
    ‚îÇ                                                           ‚îÇ
    ‚ñº                                                           ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  3. DECISI√ìN: ¬øGenerar foto o usar Drive?‚îÇ                  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ                  ‚îÇ
‚îÇ  L√≥gica:                                 ‚îÇ                  ‚îÇ
‚îÇ  IF visual_style.complexity_score > 6    ‚îÇ                  ‚îÇ
‚îÇ     ‚Üí Genera con Flux                   ‚îÇ                  ‚îÇ
‚îÇ  ELSE                                    ‚îÇ                  ‚îÇ
‚îÇ     ‚Üí Usa foto de Drive                 ‚îÇ                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
    ‚îÇ                                                           ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
    ‚îÇ                ‚îÇ                    ‚îÇ                   ‚îÇ
    ‚ñº                ‚ñº                    ‚ñº                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ 3A. FLUX AI  ‚îÇ  ‚îÇ 3B. DRIVE      ‚îÇ  ‚îÇ 3C. WHISPER     ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ                ‚îÇ  ‚îÇ (PARALELO)      ‚îÇ   ‚îÇ
‚îÇ Genera foto  ‚îÇ  ‚îÇ Selecciona     ‚îÇ  ‚îÇ                 ‚îÇ   ‚îÇ
‚îÇ $0.055       ‚îÇ  ‚îÇ foto existente ‚îÇ  ‚îÇ Transcribe      ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ $0             ‚îÇ  ‚îÇ caption para    ‚îÇ   ‚îÇ
‚îÇ              ‚îÇ  ‚îÇ                ‚îÇ  ‚îÇ mejorar         ‚îÇ   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ caption AI      ‚îÇ   ‚îÇ
    ‚îÇ                ‚îÇ                 ‚îÇ                 ‚îÇ   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  4. GENERAR CAPTION MEJORADO (GPT-4)    ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  API: OpenAI GPT-4o-mini                ‚îÇ              ‚îÇ
    ‚îÇ  Costo: $0.002                          ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Input: caption_original                ‚îÇ              ‚îÇ
    ‚îÇ  Prompt:                                 ‚îÇ              ‚îÇ
    ‚îÇ  "Reescribe este caption manteniendo    ‚îÇ              ‚îÇ
    ‚îÇ   el mensaje pero con palabras          ‚îÇ              ‚îÇ
    ‚îÇ   diferentes. Mismo tono, mismo tema,   ‚îÇ              ‚îÇ
    ‚îÇ   diferente redacci√≥n. Espa√±ol natural. ‚îÇ              ‚îÇ
    ‚îÇ   M√°ximo 150 caracteres."               ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Output: caption_mejorado               ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  5. CALCULAR DURACI√ìN DIN√ÅMICA          ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  Funci√≥n: calculateDynamicDuration()    ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  An√°lisis:                               ‚îÇ              ‚îÇ
    ‚îÇ  - Cuenta palabras del caption          ‚îÇ              ‚îÇ
    ‚îÇ  - Estima duraci√≥n: palabras / 2.5      ‚îÇ              ‚îÇ
    ‚îÇ  - Redondea a 5, 10 o 15 segundos       ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Ejemplo:                                ‚îÇ              ‚îÇ
    ‚îÇ  12 palabras ‚Üí 4.8s ‚Üí 5 segundos        ‚îÇ              ‚îÇ
    ‚îÇ  24 palabras ‚Üí 9.6s ‚Üí 10 segundos       ‚îÇ              ‚îÇ
    ‚îÇ  37 palabras ‚Üí 14.8s ‚Üí 15 segundos      ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Output: {                               ‚îÇ              ‚îÇ
    ‚îÇ    duration: 10,                         ‚îÇ              ‚îÇ
    ‚îÇ    word_count: 24,                       ‚îÇ              ‚îÇ
    ‚îÇ    estimated_audio_length: 9.6           ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  6. GENERAR AUDIO (ElevenLabs)          ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  API: ElevenLabs TTS (desde n8n)        ‚îÇ              ‚îÇ
    ‚îÇ  Plan: Free Tier                        ‚îÇ              ‚îÇ
    ‚îÇ  Costo: $0                              ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Voice ID: 3ekAN4FjFTd3LsBs8txD         ‚îÇ              ‚îÇ
    ‚îÇ  Settings:                               ‚îÇ              ‚îÇ
    ‚îÇ    stability: 0.55                       ‚îÇ              ‚îÇ
    ‚îÇ    style: 0.6                            ‚îÇ              ‚îÇ
    ‚îÇ    speed: 0.95                           ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Input: caption_mejorado                ‚îÇ              ‚îÇ
    ‚îÇ  Output: audio.mp3                      ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  ‚ö†Ô∏è Se ejecuta desde n8n para evitar    ‚îÇ              ‚îÇ
    ‚îÇ     bloqueo de IP                       ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  7. GENERAR PROMPT DE VIDEO (GPT-4)     ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  API: OpenAI GPT-4o-mini                ‚îÇ              ‚îÇ
    ‚îÇ  Generator: video-prompt-ai-generator   ‚îÇ              ‚îÇ
    ‚îÇ  Costo: $0.003                          ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Input:                                  ‚îÇ              ‚îÇ
    ‚îÇ    - caption_mejorado                   ‚îÇ              ‚îÇ
    ‚îÇ    - duration (5, 10 o 15)              ‚îÇ              ‚îÇ
    ‚îÇ    - visual_style (del an√°lisis)        ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Prompt System:                          ‚îÇ              ‚îÇ
    ‚îÇ  "Genera prompt para Kling Avatar:      ‚îÇ              ‚îÇ
    ‚îÇ   - Duraci√≥n: {duration} segundos       ‚îÇ              ‚îÇ
    ‚îÇ   - Estilo: {visual_style}              ‚îÇ              ‚îÇ
    ‚îÇ   - Gestos: {gesture_intensity}         ‚îÇ              ‚îÇ
    ‚îÇ   - Movimiento: natural y fluido        ‚îÇ              ‚îÇ
    ‚îÇ   - Background: {background_style}"     ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Output: prompt_optimizado              ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  8. ASISTENTE AI - SELECTOR DE PROVEEDOR‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  API: OpenAI GPT-4o-mini                ‚îÇ              ‚îÇ
    ‚îÇ  Costo: $0.002                          ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Input: {                                ‚îÇ              ‚îÇ
    ‚îÇ    duration: 10,                         ‚îÇ              ‚îÇ
    ‚îÇ    video_type: "talking_head",           ‚îÇ              ‚îÇ
    ‚îÇ    objective: "natural_gestures",        ‚îÇ              ‚îÇ
    ‚îÇ    budget_priority: "medium",            ‚îÇ              ‚îÇ
    ‚îÇ    available_providers: [                ‚îÇ              ‚îÇ
    ‚îÇ      {                                   ‚îÇ              ‚îÇ
    ‚îÇ        name: "kling/v1-avatar-standard", ‚îÇ              ‚îÇ
    ‚îÇ        cost: 0.28,                       ‚îÇ              ‚îÇ
    ‚îÇ        quality: 9,                       ‚îÇ              ‚îÇ
    ‚îÇ        speed: 7,                         ‚îÇ              ‚îÇ
    ‚îÇ        best_for: "natural gestures"      ‚îÇ              ‚îÇ
    ‚îÇ      },                                  ‚îÇ              ‚îÇ
    ‚îÇ      {                                   ‚îÇ              ‚îÇ
    ‚îÇ        name: "runway/gen3-alpha-turbo",  ‚îÇ              ‚îÇ
    ‚îÇ        cost: 0.50,                       ‚îÇ              ‚îÇ
    ‚îÇ        quality: 10,                      ‚îÇ              ‚îÇ
    ‚îÇ        speed: 5,                         ‚îÇ              ‚îÇ
    ‚îÇ        best_for: "cinematic quality"     ‚îÇ              ‚îÇ
    ‚îÇ      },                                  ‚îÇ              ‚îÇ
    ‚îÇ      {                                   ‚îÇ              ‚îÇ
    ‚îÇ        name: "kling/v1-turbo",           ‚îÇ              ‚îÇ
    ‚îÇ        cost: 0.15,                       ‚îÇ              ‚îÇ
    ‚îÇ        quality: 7,                       ‚îÇ              ‚îÇ
    ‚îÇ        speed: 9,                         ‚îÇ              ‚îÇ
    ‚îÇ        best_for: "fast generation"       ‚îÇ              ‚îÇ
    ‚îÇ      }                                   ‚îÇ              ‚îÇ
    ‚îÇ    ]                                     ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Prompt:                                 ‚îÇ              ‚îÇ
    ‚îÇ  "Eres un asistente experto en          ‚îÇ              ‚îÇ
    ‚îÇ   selecci√≥n de proveedores de video AI. ‚îÇ              ‚îÇ
    ‚îÇ   Analiza:                               ‚îÇ              ‚îÇ
    ‚îÇ   - Duraci√≥n del video                  ‚îÇ              ‚îÇ
    ‚îÇ   - Objetivo (gestos naturales)         ‚îÇ              ‚îÇ
    ‚îÇ   - Presupuesto (medium priority)       ‚îÇ              ‚îÇ
    ‚îÇ   - Calidad vs Costo                    ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ   Selecciona el mejor proveedor y       ‚îÇ              ‚îÇ
    ‚îÇ   explica por qu√©.                      ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ   Responde en formato JSON:             ‚îÇ              ‚îÇ
    ‚îÇ   {                                      ‚îÇ              ‚îÇ
    ‚îÇ     'provider': 'kling/v1-avatar-standard',‚îÇ           ‚îÇ
    ‚îÇ     'reason': 'Best balance...',         ‚îÇ              ‚îÇ
    ‚îÇ     'estimated_cost': 0.28,              ‚îÇ              ‚îÇ
    ‚îÇ     'estimated_time': 180                ‚îÇ              ‚îÇ
    ‚îÇ   }"                                     ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Output: {                               ‚îÇ              ‚îÇ
    ‚îÇ    provider: "kling/v1-avatar-standard", ‚îÇ              ‚îÇ
    ‚îÇ    reason: "Best balance quality/cost",  ‚îÇ              ‚îÇ
    ‚îÇ    estimated_cost: 0.28,                 ‚îÇ              ‚îÇ
    ‚îÇ    estimated_time: 180                   ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  9. GENERAR VIDEO (Kie.ai)              ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  API: Kie.ai                            ‚îÇ              ‚îÇ
    ‚îÇ  Proveedor: (elegido por Asistente AI)  ‚îÇ              ‚îÇ
    ‚îÇ  Costo: $0.15 - $0.50                   ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Input:                                  ‚îÇ              ‚îÇ
    ‚îÇ    - photo_url (Drive o Flux)           ‚îÇ              ‚îÇ
    ‚îÇ    - audio_url (ElevenLabs)             ‚îÇ              ‚îÇ
    ‚îÇ    - prompt (optimizado)                ‚îÇ              ‚îÇ
    ‚îÇ    - model (del asistente)              ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Request:                                ‚îÇ              ‚îÇ
    ‚îÇ  POST https://kie.ai/api/generate       ‚îÇ              ‚îÇ
    ‚îÇ  {                                       ‚îÇ              ‚îÇ
    ‚îÇ    "model": "kling/v1-avatar-standard",  ‚îÇ              ‚îÇ
    ‚îÇ    "image_url": "https://drive...",     ‚îÇ              ‚îÇ
    ‚îÇ    "audio_url": "https://kie.ai/...",   ‚îÇ              ‚îÇ
    ‚îÇ    "prompt": "Professional woman...",    ‚îÇ              ‚îÇ
    ‚îÇ    "duration": 10                        ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Polling (cada 10s hasta completion):   ‚îÇ              ‚îÇ
    ‚îÇ  GET https://kie.ai/api/task/{task_id}  ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Output: {                               ‚îÇ              ‚îÇ
    ‚îÇ    video_url: "https://kie.ai/videos/...",‚îÇ            ‚îÇ
    ‚îÇ    task_id: "abc123",                    ‚îÇ              ‚îÇ
    ‚îÇ    duration: 10.2,                       ‚îÇ              ‚îÇ
    ‚îÇ    credits_used: 55                      ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  10. SUBIR A GOOGLE DRIVE               ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  API: Google Drive                      ‚îÇ              ‚îÇ
    ‚îÇ  Carpeta: VIDEOS GENERADOS              ‚îÇ              ‚îÇ
    ‚îÇ  Costo: $0                              ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  1. Descarga video de Kie.ai            ‚îÇ              ‚îÇ
    ‚îÇ  2. Sube a Drive con nombre:            ‚îÇ              ‚îÇ
    ‚îÇ     {date}_{competitor}_{duration}s.mp4 ‚îÇ              ‚îÇ
    ‚îÇ  3. Genera link compartible             ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Output: {                               ‚îÇ              ‚îÇ
    ‚îÇ    drive_url: "https://drive.google...", ‚îÇ              ‚îÇ
    ‚îÇ    file_id: "1abc...",                   ‚îÇ              ‚îÇ
    ‚îÇ    file_size: 2.4                        ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  11. GUARDAR EN SUPABASE                ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  Tabla: posts                            ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  INSERT:                                 ‚îÇ              ‚îÇ
    ‚îÇ  {                                       ‚îÇ              ‚îÇ
    ‚îÇ    caption: caption_mejorado,            ‚îÇ              ‚îÇ
    ‚îÇ    suggested_media: drive_url,           ‚îÇ              ‚îÇ
    ‚îÇ    video_duration: 10,                   ‚îÇ              ‚îÇ
    ‚îÇ    status: 'pending_approval',           ‚îÇ              ‚îÇ
    ‚îÇ    type: 'reel',                         ‚îÇ              ‚îÇ
    ‚îÇ    competitor_source: post_url,          ‚îÇ              ‚îÇ
    ‚îÇ    engagement_prediction: engagement_rate,‚îÇ             ‚îÇ
    ‚îÇ    visual_style: JSON,                   ‚îÇ              ‚îÇ
    ‚îÇ    provider_used: "kling-standard",      ‚îÇ              ‚îÇ
    ‚îÇ    generation_cost: 0.28,                ‚îÇ              ‚îÇ
    ‚îÇ    created_at: NOW()                     ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  + Tabla: processed_competitor_posts    ‚îÇ              ‚îÇ
    ‚îÇ  INSERT:                                 ‚îÇ              ‚îÇ
    ‚îÇ  {                                       ‚îÇ              ‚îÇ
    ‚îÇ    post_hash: MD5(post_url),             ‚îÇ              ‚îÇ
    ‚îÇ    competitor_url: post_url,             ‚îÇ              ‚îÇ
    ‚îÇ    processed_at: NOW(),                  ‚îÇ              ‚îÇ
    ‚îÇ    used_in_post_id: {post_id}            ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  12. ENVIAR EMAIL DE APROBACI√ìN         ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  Servicio: Resend / SendGrid            ‚îÇ              ‚îÇ
    ‚îÇ  Costo: $0 (free tier)                  ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Template:                               ‚îÇ              ‚îÇ
    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ üé¨ Nuevo video generado              ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ Competidor: @{competitor}           ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ Engagement: {engagement_rate}%      ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ Duraci√≥n: {duration}s               ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ Costo: ${cost}                      ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ Caption:                             ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ "{caption_mejorado}"                ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                      ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ [Ver Video] [Aprobar] [Rechazar]   ‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Links:                                  ‚îÇ              ‚îÇ
    ‚îÇ  - Ver Video: {drive_url}               ‚îÇ              ‚îÇ
    ‚îÇ  - Aprobar: /api/posts/approve/{id}     ‚îÇ              ‚îÇ
    ‚îÇ  - Rechazar: /api/posts/reject/{id}     ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  13. ESPERAR APROBACI√ìN MANUAL          ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  Dashboard: /dashboard/pending          ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Usuario revisa:                         ‚îÇ              ‚îÇ
    ‚îÇ  ‚úì Video en Drive                       ‚îÇ              ‚îÇ
    ‚îÇ  ‚úì Caption                              ‚îÇ              ‚îÇ
    ‚îÇ  ‚úì Calidad visual                       ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Opciones:                               ‚îÇ              ‚îÇ
    ‚îÇ  [Aprobar] ‚Üí status = 'approved'        ‚îÇ              ‚îÇ
    ‚îÇ  [Editar Caption] ‚Üí Modifica y aprueba  ‚îÇ              ‚îÇ
    ‚îÇ  [Rechazar] ‚Üí status = 'rejected'       ‚îÇ              ‚îÇ
    ‚îÇ  [Regenerar] ‚Üí Vuelve a paso 3          ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                           ‚îÇ
         ‚îÇ SI APROBADO          ‚îÇ                           ‚îÇ
         ‚ñº                       ‚îÇ                           ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  14. PUBLICAR EN PLATAFORMAS            ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  APIs: Instagram + TikTok + Facebook    ‚îÇ              ‚îÇ
    ‚îÇ  Costo: $0                              ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ 14A. INSTAGRAM REELS             ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ API: Instagram Graph API         ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                   ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ 1. Upload video:                 ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ    POST /{ig-user-id}/media      ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ    media_type=REELS              ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ    video_url={drive_url}         ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                   ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ 2. Publish:                      ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ    POST /{ig-user-id}/media_publish‚îÇ ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ    creation_id={container_id}    ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ    caption={caption}             ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                   ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ ‚ö†Ô∏è Instagram agrega captions     ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ    nativos autom√°ticamente       ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ 14B. TIKTOK                      ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ API: TikTok Content Posting API  ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                   ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ 1. Init upload:                  ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ    POST /share/video/upload      ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                   ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ 2. Upload chunks                 ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ 3. Publish with caption          ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ 14C. FACEBOOK REELS              ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ API: Facebook Graph API          ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ                                   ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ POST /{page-id}/video_reels      ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ video_url={drive_url}            ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÇ description={caption}            ‚îÇ   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  Output: {                               ‚îÇ              ‚îÇ
    ‚îÇ    instagram_post_id: "123...",          ‚îÇ              ‚îÇ
    ‚îÇ    tiktok_post_id: "456...",             ‚îÇ              ‚îÇ
    ‚îÇ    facebook_post_id: "789...",           ‚îÇ              ‚îÇ
    ‚îÇ    published_at: NOW()                   ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  15. ACTUALIZAR SUPABASE                ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  UPDATE posts                            ‚îÇ              ‚îÇ
    ‚îÇ  SET                                     ‚îÇ              ‚îÇ
    ‚îÇ    status = 'published',                 ‚îÇ              ‚îÇ
    ‚îÇ    instagram_post_id = '123...',         ‚îÇ              ‚îÇ
    ‚îÇ    tiktok_post_id = '456...',            ‚îÇ              ‚îÇ
    ‚îÇ    facebook_post_id = '789...',          ‚îÇ              ‚îÇ
    ‚îÇ    published_at = NOW()                  ‚îÇ              ‚îÇ
    ‚îÇ  WHERE id = {post_id}                    ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  16. MOVER FOTO A "USADAS" (si Drive)   ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  API: Google Drive                      ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  IF foto_source == "drive":             ‚îÇ              ‚îÇ
    ‚îÇ    Move foto de:                         ‚îÇ              ‚îÇ
    ‚îÇ      FOTOS AVATAR SIN USAR               ‚îÇ              ‚îÇ
    ‚îÇ    a:                                    ‚îÇ              ‚îÇ
    ‚îÇ      FOTOS AVATAR USADAS                 ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  17. LOG DE √âXITO                       ‚îÇ              ‚îÇ
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ              ‚îÇ
    ‚îÇ  POST /api/n8n/log                      ‚îÇ              ‚îÇ
    ‚îÇ                                          ‚îÇ              ‚îÇ
    ‚îÇ  {                                       ‚îÇ              ‚îÇ
    ‚îÇ    workflow_name: "avatar-automation",   ‚îÇ              ‚îÇ
    ‚îÇ    status: "success",                    ‚îÇ              ‚îÇ
    ‚îÇ    video_generated: true,                ‚îÇ              ‚îÇ
    ‚îÇ    platforms_published: 3,               ‚îÇ              ‚îÇ
    ‚îÇ    total_cost: 0.30,                     ‚îÇ              ‚îÇ
    ‚îÇ    execution_time: 320                   ‚îÇ              ‚îÇ
    ‚îÇ  }                                       ‚îÇ              ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                     ‚îÇ                                        ‚îÇ
                     ‚ñº                                        ‚îÇ
                   ‚úÖ FIN                                     ‚îÇ
                                                              ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
    ‚îÇ  ‚ùå ERROR HANDLER                       ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ
    ‚îÇ  Si ocurre error en CUALQUIER paso:     ‚îÇ
    ‚îÇ                                          ‚îÇ
    ‚îÇ  1. Captura error                        ‚îÇ
    ‚îÇ  2. Guarda en logs                       ‚îÇ
    ‚îÇ  3. Env√≠a email:                         ‚îÇ
    ‚îÇ     "‚ö†Ô∏è Error en workflow                ‚îÇ
    ‚îÇ      Paso: {step_name}                   ‚îÇ
    ‚îÇ      Error: {error_message}              ‚îÇ
    ‚îÇ      Post: {competitor_url}"             ‚îÇ
    ‚îÇ  4. Detiene ejecuci√≥n                    ‚îÇ
    ‚îÇ  5. NO reintenta                         ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üí∞ DESGLOSE DE COSTOS POR VIDEO

| Componente | Costo Unitario | Frecuencia | Costo Mensual (30 videos) |
|------------|----------------|------------|---------------------------|
| **An√°lisis Visual (GPT-4 Vision)** | $0.01 | 1/video | $0.30 |
| **Caption Mejorado (GPT-4o-mini)** | $0.002 | 1/video | $0.06 |
| **Prompt Video (GPT-4o-mini)** | $0.003 | 1/video | $0.09 |
| **Asistente Selector (GPT-4o-mini)** | $0.002 | 1/video | $0.06 |
| **Flux Pro (ocasional 5 fotos)** | $0.055 | 5/mes | $0.28 |
| **ElevenLabs Free Tier** | $0 | 1/video | $0.00 |
| **Kling Avatar (Kie.ai)** | $0.28 | 1/video | $8.40 |
| **Instagram API** | $0 | 1/video | $0.00 |
| **TikTok API** | $0 | 1/video | $0.00 |
| **Facebook API** | $0 | 1/video | $0.00 |
| **Google Drive** | $0 | 1/video | $0.00 |
| **TOTAL** | **~$0.30** | **30 videos** | **~$9.19/mes** ‚úÖ |

### Limitaciones Free Tier:
- **ElevenLabs Free:** 10,000 caracteres/mes = ~5 videos
  - **Soluci√≥n:** Generar m√°ximo 5 videos/mes o upgrade a Starter $5/mes para 30 videos
- **Instagram API:** Sin l√≠mites en free tier (usa Meta Business Account)
- **Google Drive:** 15 GB gratis (suficiente para ~300 videos)

---

## üîß COMPONENTES T√âCNICOS A IMPLEMENTAR

### 1. **Nueva tabla Supabase: `processed_competitor_posts`**

```sql
CREATE TABLE processed_competitor_posts (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  post_hash VARCHAR(32) NOT NULL UNIQUE, -- MD5 del post URL
  competitor_url TEXT NOT NULL,
  competitor_account VARCHAR(100),
  engagement_rate DECIMAL(5,2),
  processed_at TIMESTAMP DEFAULT NOW(),
  used_in_post_id UUID REFERENCES posts(id),
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_post_hash ON processed_competitor_posts(post_hash);
CREATE INDEX idx_processed_at ON processed_competitor_posts(processed_at);
```

### 2. **Actualizar tabla `posts`**

```sql
ALTER TABLE posts
ADD COLUMN IF NOT EXISTS competitor_source TEXT,
ADD COLUMN IF NOT EXISTS visual_style JSONB,
ADD COLUMN IF NOT EXISTS provider_used VARCHAR(50),
ADD COLUMN IF NOT EXISTS generation_cost DECIMAL(10,4),
ADD COLUMN IF NOT EXISTS instagram_post_id VARCHAR(100),
ADD COLUMN IF NOT EXISTS tiktok_post_id VARCHAR(100),
ADD COLUMN IF NOT EXISTS facebook_post_id VARCHAR(100);
```

### 3. **Nuevo endpoint: `/api/automation/analyze-posts`**

```typescript
// src/pages/api/automation/analyze-posts.ts

/**
 * Analiza posts de competidores de las √∫ltimas 72h
 * Calcula engagement rate
 * Excluye posts ya procesados
 * Retorna top 1 post
 */

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  // 1. Obtener competidores de Supabase
  const competitors = await getCompetitors();

  // 2. Para cada competidor, obtener posts √∫ltimas 72h
  const posts = await getRecentPosts(competitors, 72);

  // 3. Calcular engagement rate
  const postsWithEngagement = posts.map(post => ({
    ...post,
    engagement_rate: (post.likes + post.comments) / post.follower_count * 100
  }));

  // 4. Excluir posts ya procesados (check hash en DB)
  const processedHashes = await getProcessedHashes();
  const newPosts = postsWithEngagement.filter(post =>
    !processedHashes.includes(md5(post.url))
  );

  // 5. Ordenar por engagement rate
  const sortedPosts = newPosts.sort((a, b) => b.engagement_rate - a.engagement_rate);

  // 6. Retornar top 1
  return res.json({
    success: true,
    post: sortedPosts[0],
    analyzed_count: posts.length,
    new_posts_count: newPosts.length
  });
}
```

### 4. **Nuevo endpoint: `/api/ai/analyze-visual-style`**

```typescript
// src/pages/api/ai/analyze-visual-style.ts

/**
 * Analiza estilo visual de una imagen/video con GPT-4 Vision
 */

import OpenAI from 'openai';

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  const { media_url } = req.body;

  const openai = new OpenAI();

  const response = await openai.chat.completions.create({
    model: 'gpt-4-vision-preview',
    messages: [
      {
        role: 'user',
        content: [
          {
            type: 'text',
            text: `Analiza esta imagen/video de Instagram:
            - Colores dominantes
            - Estilo de fondo (interior/exterior, descripci√≥n)
            - Iluminaci√≥n (natural/artificial, calidad)
            - Composici√≥n (centrado/lateral)
            - Mood (profesional/casual/din√°mico)
            - Pose del presentador
            - Complejidad visual (1-10)

            Genera un prompt en ingl√©s para replicar este estilo visual con Flux AI.

            Responde en formato JSON:
            {
              "visual_style": {
                "colors": ["color1", "color2"],
                "background": "description",
                "lighting": "description",
                "mood": "description",
                "complexity_score": 7
              },
              "flux_prompt": "Professional woman in...",
              "use_flux": true/false
            }`
          },
          {
            type: 'image_url',
            image_url: { url: media_url }
          }
        ]
      }
    ],
    max_tokens: 500
  });

  const result = JSON.parse(response.choices[0].message.content);

  return res.json({
    success: true,
    ...result,
    cost: 0.01
  });
}
```

### 5. **Nuevo endpoint: `/api/ai/provider-selector`**

```typescript
// src/pages/api/ai/provider-selector.ts

/**
 * Asistente AI que elige el mejor proveedor de video
 */

import OpenAI from 'openai';

const AVAILABLE_PROVIDERS = [
  {
    name: 'kling/v1-avatar-standard',
    cost: 0.28,
    quality: 9,
    speed: 7,
    best_for: 'natural gestures, talking head'
  },
  {
    name: 'kling/v1-turbo',
    cost: 0.15,
    quality: 7,
    speed: 9,
    best_for: 'fast generation, simple videos'
  },
  {
    name: 'runway/gen3-alpha-turbo',
    cost: 0.50,
    quality: 10,
    speed: 5,
    best_for: 'cinematic quality, complex scenes'
  }
];

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  const { duration, video_type, objective, budget_priority } = req.body;

  const openai = new OpenAI();

  const response = await openai.chat.completions.create({
    model: 'gpt-4o-mini',
    messages: [
      {
        role: 'system',
        content: `Eres un asistente experto en selecci√≥n de proveedores de video AI.
        Analiza los par√°metros del video y elige el mejor proveedor considerando:
        - Calidad vs Costo
        - Velocidad de generaci√≥n
        - Tipo de video y objetivo
        - Presupuesto disponible

        Proveedores disponibles: ${JSON.stringify(AVAILABLE_PROVIDERS, null, 2)}

        Responde SOLO en formato JSON:
        {
          "provider": "provider_name",
          "reason": "explanation in Spanish",
          "estimated_cost": 0.00,
          "estimated_time": 180
        }`
      },
      {
        role: 'user',
        content: `Video details:
        - Duration: ${duration}s
        - Type: ${video_type}
        - Objective: ${objective}
        - Budget priority: ${budget_priority}

        ¬øQu√© proveedor recomiendas?`
      }
    ],
    temperature: 0.3
  });

  const selection = JSON.parse(response.choices[0].message.content);

  return res.json({
    success: true,
    ...selection
  });
}
```

### 6. **Actualizar endpoint: `/api/video/generate-with-kling`**

```typescript
// Modificar para aceptar provider din√°mico

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  const {
    photo_url,
    audio_url,
    prompt,
    provider = 'kling/v1-avatar-standard' // ‚Üê Din√°mico
  } = req.body;

  // Generar video con provider seleccionado
  const response = await fetch('https://kie.ai/api/generate', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.KIE_API_KEY}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      model: provider, // ‚Üê Din√°mico
      image_url: photo_url,
      audio_url: audio_url,
      prompt: prompt
    })
  });

  // ... resto del c√≥digo
}
```

### 7. **Nuevos endpoints de publicaci√≥n**

#### `/api/social/publish-instagram`
```typescript
// src/pages/api/social/publish-instagram.ts

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  const { video_url, caption, ig_user_id } = req.body;

  // 1. Upload video container
  const containerResponse = await fetch(
    `https://graph.facebook.com/v18.0/${ig_user_id}/media`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        media_type: 'REELS',
        video_url: video_url,
        caption: caption,
        access_token: process.env.INSTAGRAM_ACCESS_TOKEN
      })
    }
  );

  const { id: container_id } = await containerResponse.json();

  // 2. Publish
  const publishResponse = await fetch(
    `https://graph.facebook.com/v18.0/${ig_user_id}/media_publish`,
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        creation_id: container_id,
        access_token: process.env.INSTAGRAM_ACCESS_TOKEN
      })
    }
  );

  const { id: post_id } = await publishResponse.json();

  return res.json({
    success: true,
    instagram_post_id: post_id
  });
}
```

#### `/api/social/publish-tiktok`
```typescript
// Similar para TikTok Content Posting API
```

#### `/api/social/publish-facebook`
```typescript
// Similar para Facebook Graph API (Reels)
```

---

## üìÖ PLAN DE IMPLEMENTACI√ìN

### FASE 1: Base de Datos y Backend (D√≠a 1-2)

- [x] Ejecutar migraci√≥n Supabase:
  - `20250129_add_video_duration.sql`
  - Crear tabla `processed_competitor_posts`
  - Actualizar tabla `posts` con nuevas columnas

- [ ] Crear endpoints base:
  - `/api/automation/analyze-posts`
  - `/api/ai/analyze-visual-style`
  - `/api/ai/provider-selector`

- [ ] Configurar APIs externas:
  - Instagram Graph API (OAuth)
  - TikTok Content Posting API
  - Facebook Graph API

### FASE 2: Generaci√≥n de Contenido (D√≠a 3-4)

- [ ] Implementar an√°lisis visual (GPT-4 Vision)
- [ ] Integrar Flux AI para generaci√≥n de fotos
- [ ] Crear l√≥gica de decisi√≥n (Drive vs Flux)
- [ ] Actualizar generador de prompts con duraci√≥n din√°mica

### FASE 3: Asistente AI y Video (D√≠a 5-6)

- [ ] Implementar Asistente Selector de Proveedor
- [ ] Actualizar endpoint Kie.ai para multi-provider
- [ ] Integrar ElevenLabs desde n8n (evitar bloqueo IP)
- [ ] Implementar subida a Google Drive

### FASE 4: Workflow n8n (D√≠a 7-8)

- [ ] Crear workflow completo en n8n
- [ ] Configurar trigger diario 7 AM
- [ ] Implementar nodos:
  1. HTTP Request ‚Üí `/api/automation/analyze-posts`
  2. HTTP Request ‚Üí `/api/ai/analyze-visual-style`
  3. IF ‚Üí Decidir Drive vs Flux
  4. HTTP Request ‚Üí ElevenLabs (audio)
  5. HTTP Request ‚Üí `/api/ai/provider-selector`
  6. HTTP Request ‚Üí Kie.ai (video)
  7. Google Drive ‚Üí Subir video
  8. Supabase ‚Üí Guardar post
  9. Email ‚Üí Notificar aprobaci√≥n pendiente

### FASE 5: Dashboard y Aprobaci√≥n (D√≠a 9-10)

- [ ] Crear p√°gina `/dashboard/pending`
- [ ] Botones: Aprobar / Editar / Rechazar / Regenerar
- [ ] Endpoint `/api/posts/approve/{id}`
- [ ] Integrar publicaci√≥n multi-platform

### FASE 6: Testing y Optimizaci√≥n (D√≠a 11-12)

- [ ] Test end-to-end completo
- [ ] Validar costos reales
- [ ] Optimizar tiempos de generaci√≥n
- [ ] Configurar error handling

### FASE 7: Monitoreo y Analytics (D√≠a 13-14)

- [ ] Dashboard de m√©tricas
- [ ] Tracking de engagement por plataforma
- [ ] An√°lisis de costos por video
- [ ] Comparaci√≥n engagement competidor vs tuyo

---

## üéØ M√âTRICAS DE √âXITO

### Semana 1:
- ‚úÖ 7 videos generados autom√°ticamente
- ‚úÖ Publicados en Instagram + TikTok + Facebook
- ‚úÖ Costo total < $10
- ‚úÖ Tiempo manual < 1 hora/semana (solo aprobaciones)

### Mes 1:
- ‚úÖ 30 videos publicados
- ‚úÖ Engagement rate promedio > competidores
- ‚úÖ Crecimiento followers: +5-10%
- ‚úÖ Sistema 100% funcional y estable

### Mes 3:
- ‚úÖ 90 videos publicados
- ‚úÖ Crecimiento followers: +20-30%
- ‚úÖ Optimizaci√≥n de costos (upgrade selectivo a herramientas pagas)
- ‚úÖ Workflows adicionales (Stories, Carousels)

---

## ‚ö†Ô∏è CONSIDERACIONES IMPORTANTES

### Limitaciones ElevenLabs Free Tier:
- **10,000 caracteres/mes = ~5 videos**
- **Soluciones:**
  1. Generar solo 5 videos/mes (1 video cada 6 d√≠as)
  2. Upgrade a Starter $5/mes para 15 videos/mes
  3. Usar TTS alternativo gratis (Google TTS, Azure TTS)

### Captions Nativos de Instagram:
- Solo visibles en Instagram app
- No se exportan a TikTok/Facebook
- **Recomendaci√≥n futura:** Considerar Whisper + FFmpeg para subt√≠tulos permanentes

### APIs de Redes Sociales:
- Requieren cuentas Business/Creator
- Instagram: Meta Business Account
- TikTok: Developer Account
- Facebook: Page Admin access

---

## üöÄ SIGUIENTE PASO INMEDIATO

**¬øQuieres que empiece a implementar?**

**Opci√≥n A:** Empezar por FASE 1 (Base de datos y Backend)
**Opci√≥n B:** Crear primero el Asistente Selector de Proveedor (demo)
**Opci√≥n C:** Configurar APIs de redes sociales primero
**Opci√≥n D:** Modificar algo del flujo antes de implementar

**¬øPor d√≥nde empezamos?**
